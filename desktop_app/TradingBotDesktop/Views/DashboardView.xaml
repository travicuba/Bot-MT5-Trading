<Page x:Class="TradingBotDesktop.Views.DashboardView"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Background="{StaticResource SecondaryBgBrush}"
      Title="Dashboard">

    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <Grid Margin="24">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- TITULO -->
            <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,20">
                <TextBlock Text="Dashboard" Style="{StaticResource PageTitle}" Margin="0"/>
                <TextBlock x:Name="LastUpdate" Text=""
                           FontSize="11" Foreground="{StaticResource TextSecondaryBrush}"
                           VerticalAlignment="Center" Margin="16,0,0,0"/>
            </StackPanel>

            <!-- ESTADO BOT + CONTROLES -->
            <Border Grid.Row="1" Style="{StaticResource CardPanel}" Margin="0,0,0,16">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <!-- Estado -->
                    <StackPanel Grid.Column="0">
                        <TextBlock Text="ESTADO DEL BOT" Style="{StaticResource SectionTitle}"/>
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                            <Ellipse x:Name="BotStatusDot" Width="14" Height="14"
                                     Fill="{StaticResource ErrorBrush}"
                                     VerticalAlignment="Center" Margin="0,0,8,0"/>
                            <TextBlock x:Name="BotStatusText" Text="DETENIDO"
                                       FontSize="20" FontWeight="Bold"
                                       Foreground="{StaticResource ErrorBrush}"
                                       VerticalAlignment="Center"/>
                        </StackPanel>

                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="Uptime: " Foreground="{StaticResource TextSecondaryBrush}" FontSize="12"/>
                            <TextBlock x:Name="UptimeText" Text="-" FontSize="12"/>
                            <TextBlock Text="   PID: " Foreground="{StaticResource TextSecondaryBrush}" FontSize="12"/>
                            <TextBlock x:Name="PidText" Text="-" FontSize="12"/>
                            <TextBlock Text="   Trades activos: " Foreground="{StaticResource TextSecondaryBrush}" FontSize="12"/>
                            <TextBlock x:Name="ActiveTradesText" Text="0"
                                       FontSize="12" Foreground="{StaticResource AccentBrush}"/>
                        </StackPanel>
                    </StackPanel>

                    <!-- Botones control -->
                    <StackPanel Grid.Column="1" Orientation="Horizontal"
                                VerticalAlignment="Center">
                        <Button x:Name="BtnStart"
                                Content="INICIAR BOT"
                                Style="{StaticResource SuccessButton}"
                                Width="140" Height="40"
                                Margin="0,0,10,0"
                                Click="BtnStart_Click"/>
                        <Button x:Name="BtnStop"
                                Content="DETENER BOT"
                                Style="{StaticResource DangerButton}"
                                Width="140" Height="40"
                                IsEnabled="False"
                                Click="BtnStop_Click"/>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- ESTADISTICAS RAPIDAS (HOY) -->
            <TextBlock Grid.Row="2" Text="HOY" Style="{StaticResource SectionTitle}"/>
            <UniformGrid Grid.Row="2" Columns="5" Margin="0,28,0,16">
                <!-- Trades hoy -->
                <Border Style="{StaticResource CardPanel}" Margin="0,0,8,0">
                    <StackPanel>
                        <TextBlock x:Name="TodayTrades" Text="0" Style="{StaticResource StatValue}"/>
                        <TextBlock Text="Trades" Style="{StaticResource StatLabel}"/>
                    </StackPanel>
                </Border>

                <!-- Ganadas hoy -->
                <Border Style="{StaticResource CardPanel}" Margin="4,0">
                    <StackPanel>
                        <TextBlock x:Name="TodayWins" Text="0"
                                   Style="{StaticResource StatValue}"
                                   Foreground="{StaticResource SuccessBrush}"/>
                        <TextBlock Text="Ganadas" Style="{StaticResource StatLabel}"/>
                    </StackPanel>
                </Border>

                <!-- Win rate hoy -->
                <Border Style="{StaticResource CardPanel}" Margin="4,0">
                    <StackPanel>
                        <TextBlock x:Name="TodayWinRate" Text="0%"
                                   Style="{StaticResource StatValue}"
                                   Foreground="{StaticResource AccentBrush}"/>
                        <TextBlock Text="Win Rate" Style="{StaticResource StatLabel}"/>
                    </StackPanel>
                </Border>

                <!-- Pips hoy -->
                <Border Style="{StaticResource CardPanel}" Margin="4,0">
                    <StackPanel>
                        <TextBlock x:Name="TodayPips" Text="0"
                                   Style="{StaticResource StatValue}"/>
                        <TextBlock Text="Pips" Style="{StaticResource StatLabel}"/>
                    </StackPanel>
                </Border>

                <!-- Total trades -->
                <Border Style="{StaticResource CardPanel}" Margin="8,0,0,0">
                    <StackPanel>
                        <TextBlock x:Name="TotalTrades" Text="0"
                                   Style="{StaticResource StatValue}"
                                   Foreground="{StaticResource TextSecondaryBrush}"/>
                        <TextBlock Text="Total trades" Style="{StaticResource StatLabel}"/>
                    </StackPanel>
                </Border>
            </UniformGrid>

            <!-- ESTADISTICAS GLOBALES -->
            <Border Grid.Row="3" Style="{StaticResource CardPanel}" Margin="0,4,0,0">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Win Rate Global -->
                    <StackPanel Grid.Column="0" Margin="0,0,16,0">
                        <TextBlock Text="RENDIMIENTO GLOBAL" Style="{StaticResource SectionTitle}"/>
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,6">
                            <TextBlock Text="Win Rate: " Foreground="{StaticResource TextSecondaryBrush}"/>
                            <TextBlock x:Name="GlobalWinRate" Text="0%"
                                       Foreground="{StaticResource AccentBrush}" FontWeight="Bold"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,6">
                            <TextBlock Text="Total Pips: " Foreground="{StaticResource TextSecondaryBrush}"/>
                            <TextBlock x:Name="GlobalPips" Text="0"
                                       FontWeight="Bold"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="Ganadas / Perdidas: " Foreground="{StaticResource TextSecondaryBrush}"/>
                            <TextBlock x:Name="WinsLosses" Text="0 / 0"
                                       FontWeight="Bold"/>
                        </StackPanel>
                    </StackPanel>

                    <!-- Esta semana -->
                    <StackPanel Grid.Column="1" Margin="16,0">
                        <TextBlock Text="ESTA SEMANA" Style="{StaticResource SectionTitle}"/>
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,6">
                            <TextBlock Text="Trades: " Foreground="{StaticResource TextSecondaryBrush}"/>
                            <TextBlock x:Name="WeekTrades" Text="0" FontWeight="Bold"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,6">
                            <TextBlock Text="Win Rate: " Foreground="{StaticResource TextSecondaryBrush}"/>
                            <TextBlock x:Name="WeekWinRate" Text="0%"
                                       Foreground="{StaticResource AccentBrush}" FontWeight="Bold"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="Pips: " Foreground="{StaticResource TextSecondaryBrush}"/>
                            <TextBlock x:Name="WeekPips" Text="0" FontWeight="Bold"/>
                        </StackPanel>
                    </StackPanel>

                    <!-- Puente MT5 -->
                    <StackPanel Grid.Column="2" Margin="16,0,0,0">
                        <TextBlock Text="PUENTE MT5" Style="{StaticResource SectionTitle}"/>
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,6">
                            <TextBlock Text="Estado: " Foreground="{StaticResource TextSecondaryBrush}"/>
                            <TextBlock x:Name="BridgeStatusText" Text="-" FontWeight="Bold"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,6">
                            <TextBlock Text="Sincronizaciones: " Foreground="{StaticResource TextSecondaryBrush}"/>
                            <TextBlock x:Name="SyncCountText" Text="0" FontWeight="Bold"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="Ultimo sync: " Foreground="{StaticResource TextSecondaryBrush}"/>
                            <TextBlock x:Name="LastSyncText" Text="-" FontWeight="Bold"/>
                        </StackPanel>
                    </StackPanel>
                </Grid>
            </Border>

        </Grid>
    </ScrollViewer>
</Page>
